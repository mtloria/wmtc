"use strict";(self.webpackChunkwmtc=self.webpackChunkwmtc||[]).push([[791],{644:function(e,t,n){function l(e){if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e)){const[t,n,l]=e.split("/"),a=new Date(Date.UTC(l,t-1,Number(n)+1));if(!isNaN(a))return a.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}return e}n.d(t,{H:function(){return l}})},9097:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var l=n(6540),a=n(6793),r=n(7164),c=n(1208),o=n(3551),s=n(9799),m=n(4090),i=n(7211),u=n(4545),d=n(3357),E=n(921),A=n(8719),h=n(6576),g=n(3992),p=n(477),f=n(3198),y=n(4155),x=n(4137),b=n(6627),w=n(6798),v=n(4774),k=n(3884),S=n(2848);var N=e=>{let{results:t}=e;const n=(0,p.A)("(max-width:600px)"),[a,c]=l.useState({}),[o,s]=l.useState(!0);l.useEffect((()=>{if(!o)return;const e=setTimeout((()=>s(!1)),2500);return()=>clearTimeout(e)}),[o]),l.useEffect((()=>{c({})}),[n]);return n?l.createElement(r.A,{sx:{position:"relative"}},o&&l.createElement(r.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(255,255,255,0.92)",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"}},l.createElement(r.A,{sx:{p:3,borderRadius:2,bgcolor:"background.paper",boxShadow:2,textAlign:"center"}},l.createElement("span",{style:{fontWeight:600,fontSize:18}},"Tap any row to see more details"))),l.createElement(f.A,{component:y.A,style:{maxHeight:"70vh",margin:0,border:"1px solid #ccc",borderRadius:"8px"}},l.createElement(x.A,{size:"small",stickyHeader:!0},l.createElement(b.A,null,l.createElement(w.A,{style:{backgroundColor:"#f5f5f5"}},l.createElement(v.A,{style:{fontWeight:"bold"}},"Name"),l.createElement(v.A,{style:{fontWeight:"bold"}},"Distance"),l.createElement(v.A,{style:{fontWeight:"bold"}},"Result"),l.createElement(v.A,null))),l.createElement(k.A,null,t.map(((e,t)=>l.createElement(l.Fragment,{key:t},l.createElement(w.A,{hover:!0,onClick:()=>(e=>{c((t=>({...t,[e]:!t[e]})))})(t),sx:{cursor:"pointer",transition:"background 0.2s",backgroundColor:a[t]?"action.selected":void 0,"&:hover":{backgroundColor:a[t]?"action.selected":"action.hover"},userSelect:"none"}},l.createElement(v.A,null,e.name),l.createElement(v.A,null,e.distance),l.createElement(v.A,null,e.result),l.createElement(v.A,null)),l.createElement(w.A,null,l.createElement(v.A,{style:{paddingBottom:0,paddingTop:0},colSpan:4},l.createElement(S.A,{in:a[t],timeout:"auto",unmountOnExit:!0},l.createElement(r.A,{margin:1},l.createElement("div",null,l.createElement("strong",null,"Event:")," ",e.event),e.place&&l.createElement("div",null,l.createElement("strong",null,"Place:")," ",e.place),l.createElement("div",null,l.createElement("strong",null,"Date:")," ",e.date)))))))))))):l.createElement(f.A,{component:y.A,style:{maxHeight:"70vh",margin:0,border:"1px solid #ddd"}},l.createElement(x.A,{stickyHeader:!0},l.createElement(b.A,null,l.createElement(w.A,{style:{backgroundColor:"#f5f5f5"}},l.createElement(v.A,{style:{fontWeight:"bold"}},"Name"),l.createElement(v.A,{style:{fontWeight:"bold"}},"Distance"),l.createElement(v.A,{style:{fontWeight:"bold"}},"Result"),l.createElement(v.A,{style:{fontWeight:"bold"}},"Event"),l.createElement(v.A,{style:{fontWeight:"bold"}},"Place"),l.createElement(v.A,{style:{fontWeight:"bold"}},"Date"))),l.createElement(k.A,null,t.map(((e,t)=>l.createElement(w.A,{key:t,hover:!0},l.createElement(v.A,null,e.name),l.createElement(v.A,null,e.distance),l.createElement(v.A,null,e.result),l.createElement(v.A,null,e.event),l.createElement(v.A,null,e.place),l.createElement(v.A,null,e.date)))))))},W=n(644),C=n(6829),D=n(4519),H=n(7065),R=n(1692);var M=()=>{const[e,t]=l.useState([]),[n,p]=l.useState(!0),[f,y]=l.useState(null),[x,b]=l.useState(null),[w,v]=l.useState(null),[k,S]=l.useState("undefined"!=typeof window&&window.matchMedia("(max-width:600px)").matches);l.useEffect((()=>{document.body.style.margin="0",document.body.style.padding="0",document.title="Results | WMTC";(async()=>{p(!0),y(null);try{const e=await(0,g.b)("138hvDGLQMJmggHGqWQr_E29276fiE29VS0OQflFsgMk","Results");t(e)}catch(e){y("Failed to load results. Please try again later.")}finally{p(!1)}})()}),[]),l.useEffect((()=>{const e=window.matchMedia("(max-width:600px)"),t=()=>S(e.matches);return e.addEventListener("change",t),S(e.matches),()=>e.removeEventListener("change",t)}),[]);const M=e.filter((e=>e["First Name"]&&""!==e["First Name"].trim()||e["Last Name"]&&""!==e["Last Name"].trim())).map((e=>{let t=e["Race Date"]||"";t=(0,W.H)(t);let n=e["Result (HH:MM:SS.MS)"]||"";if(n){const[e,t]=n.split("."),l=e.split(":"),a=l[1]?l[1].replace(/^0+(?!$)/,""):"",r=l[2]?l[2].replace(/^0+(?!$)/,""):"";let c="";c=l[0]&&Number(l[0])>0?String(Number(l[0]))+":"+a+":"+r:a+":"+r,n=c+(t?"."+t:"")}let l=e["Place (optional)"]&&"N/A"!==e["Place (optional)"].trim()?e["Place (optional)"]:"";return{name:`${e["First Name"]||""} ${e["Last Name"]||""}`.trim(),distance:e["Event Distance"]||"",result:n,event:e["Event Name"]||"",place:l,date:t}})).reduce(((e,t)=>{const n=t.date?new Date(t.date).getFullYear():"Unknown";return e[n]||(e[n]=[]),e[n].push(t),e}),{});Object.keys(M).forEach((e=>{M[e].sort(((e,t)=>e.date&&t.date?new Date(t.date)-new Date(e.date):0))}));const F=Object.keys(M).filter((e=>"Unknown"!==e)).map(Number).sort(((e,t)=>t-e));return M.Unknown&&F.push("Unknown"),l.useEffect((()=>{F.length>0&&!x&&b(F[0])}),[F,x]),l.createElement(C.A,{theme:H.A},l.createElement(D.Ay,null),l.createElement(r.A,{sx:{backgroundColor:"background.default",minHeight:"100vh",width:"100vw"}},l.createElement(a.A,null),l.createElement(c.A,null,l.createElement(o.A,{variant:"h1",gutterBottom:!0,align:"center",sx:{mt:{xs:4,md:6}}},"Results"),l.createElement(r.A,{sx:{maxWidth:"1400px",margin:"0 auto",display:"flex",flexDirection:k?"column":"row",alignItems:"stretch",justifyContent:"center",mt:4}},!k&&l.createElement(r.A,{sx:{minWidth:200,maxWidth:220,mr:4,display:"flex",alignItems:"stretch",height:"100%"}},l.createElement(s.A,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:2,boxShadow:1,height:"100%"}},F.map((e=>l.createElement(m.Ay,{key:e,disablePadding:!0},l.createElement(i.A,{selected:x===e,onClick:()=>b(e)},l.createElement(u.A,{primary:e}))))))),l.createElement(r.A,{sx:{flexGrow:1,minWidth:0,display:"flex",alignItems:"flex-start",p:0,width:"100%"}},n?l.createElement(r.A,{sx:{display:"flex",justifyContent:"center",p:3}},l.createElement(d.A,null)):f?l.createElement(r.A,{sx:{p:3,textAlign:"center",color:"error.main"}},l.createElement(o.A,null,f)):k?l.createElement(r.A,{sx:{width:"100%"}},F.map((e=>l.createElement(E.A,{key:e,sx:{mb:2},expanded:w===e,onChange:()=>v(w===e?null:e)},l.createElement(A.A,{expandIcon:l.createElement(R.A,null)},l.createElement(o.A,{variant:"h6"},e)),l.createElement(h.A,null,l.createElement(N,{results:M[e]})))))):x&&l.createElement(N,{results:M[x]}))))))}}}]);
//# sourceMappingURL=component---src-pages-results-js-320acbfa784a794105ed.js.map